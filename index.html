<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reze's Biology Class</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');

        :root {
            --bg-color: #000000;
            --chat-bg: #1a1a1a;
            --accent-color: #9b59b6; /* Reze Purple */
            --bubble-bg: #2c2c2e;
            --user-bubble-bg: #8e44ad;
            --text-main: #ffffff;
            --text-sub: #8e8e93;
            --option-bg: #3a3a3c;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .phone-container {
            width: 100%;
            max-width: 420px;
            height: 90vh;
            background-color: var(--chat-bg);
            border-radius: 30px;
            box-shadow: 0 0 30px rgba(155, 89, 182, 0.3);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
            border: 1px solid #333;
        }

        /* í—¤ë” */
        .header {
            padding: 15px 20px;
            background-color: rgba(26, 26, 26, 0.98);
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .profile-pic-small {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 12px;
            border: 2px solid var(--accent-color);
        }

        .header-info h2 {
            font-size: 1.1rem;
            margin: 0;
            font-weight: 700;
            color: #fff;
        }

        .header-info span {
            font-size: 0.85rem;
            color: var(--accent-color);
        }

        /* ì±„íŒ… ì˜ì—­ */
        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
            scroll-behavior: smooth;
        }
        .chat-area::-webkit-scrollbar { display: none; }

        /* ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
        .message {
            display: flex;
            align-items: flex-end;
            max-width: 85%;
            animation: fadeUp 0.3s ease-out;
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.reze { align-self: flex-start; }
        .message.user { align-self: flex-end; flex-direction: row-reverse; }

        .bubble {
            padding: 12px 16px;
            border-radius: 20px;
            font-size: 0.95rem;
            line-height: 1.5;
            position: relative;
            word-wrap: break-word;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }

        .reze .bubble {
            background-color: var(--bubble-bg);
            border-bottom-left-radius: 4px;
            margin-left: 10px;
            color: #eee;
        }

        .user .bubble {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            border-bottom-right-radius: 4px;
            margin-right: 10px;
            color: white;
        }

        .profile-pic-chat {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            flex-shrink: 0;
        }

        /* ë¬¸ì œ ì¹´ë“œ */
        .question-card {
            background: #252527;
            border-radius: 15px;
            padding: 15px;
            margin-top: 5px;
            border: 1px solid #3a3a3c;
        }

        .question-tag {
            font-size: 0.75rem;
            color: var(--accent-color);
            font-weight: bold;
            margin-bottom: 8px;
            display: block;
            letter-spacing: 1px;
        }

        .question-text {
            font-size: 1rem;
            font-weight: 500;
            color: #fff;
        }

        /* 4ì§€ì„ ë‹¤ ì˜µì…˜ ë²„íŠ¼ */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
            width: 100%;
        }

        .option-btn {
            background-color: var(--option-bg);
            color: white;
            border: 1px solid #444;
            padding: 12px;
            border-radius: 12px;
            text-align: left;
            cursor: pointer;
            font-size: 0.9rem;
            transition: 0.2s;
        }

        .option-btn:hover {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
        }

        /* ì…ë ¥ì°½ */
        .input-area {
            padding: 15px;
            background-color: #1a1a1a;
            border-top: 1px solid #333;
        }

        .input-wrapper {
            background-color: #2c2c2e;
            border-radius: 25px;
            padding: 5px 15px;
            display: flex;
            align-items: center;
        }

        input[type="text"] {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            padding: 10px;
            font-size: 1rem;
            outline: none;
        }

        button.send-btn {
            background: none;
            border: none;
            color: var(--accent-color);
            font-weight: bold;
            cursor: pointer;
            padding: 8px 12px;
        }
        
        button:disabled { color: #555; cursor: not-allowed; }

        /* ì‹œì‘ í™”ë©´ */
        .start-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.92);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(5px);
        }
        
        .start-img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--accent-color);
            margin-bottom: 20px;
            box-shadow: 0 0 20px rgba(155, 89, 182, 0.5);
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div class="phone-container">
        <!-- í—¤ë” -->
        <div class="header">
            <img src="images-2.jpeg" alt="Reze" class="profile-pic-small">
            <div class="header-info">
                <h2>Reze</h2>
                <span>Active now â€¢ Cafe Crossroads</span>
            </div>
        </div>

        <!-- ì±„íŒ…ë°© -->
        <div class="chat-area" id="chat-box"></div>

        <!-- ì…ë ¥ì°½ -->
        <div class="input-area">
            <div class="input-wrapper">
                <input type="text" id="answer-input" placeholder="ë©”ì‹œì§€..." autocomplete="off" onkeypress="if(event.keyCode==13) checkAnswer()">
                <button class="send-btn" id="send-btn" onclick="checkAnswer()">Send</button>
            </div>
        </div>

        <!-- ì‹œì‘ í™”ë©´ -->
        <div class="start-overlay" id="start-screen">
            <img src="images-2.jpeg" alt="Reze" class="start-img">
            <h2 style="color:white; margin-bottom: 5px;">Reze</h2>
            <p style="color:#aaa; margin-bottom: 30px;">"ë´ì§€ êµ°, ì˜¤ëŠ˜ ë°¤ì—” ì•ˆ ì¬ìš¸ ê±°ì•¼."</p>
            <button class="option-btn" style="width: auto; padding: 12px 40px; background: var(--accent-color);" onclick="startGame()">DM ìˆ˜ë½</button>
        </div>
    </div>

    <script>
        // 40ë¬¸ì œ ì´ìƒì˜ ëŒ€ê·œëª¨ ë¬¸ì œ DB
        const questionBank = [
            // 8ë‹¨ì›: DNAì™€ ì„¸í¬ì£¼ê¸°
            {
                category: "8ë‹¨ì›: DNA êµ¬ì¡°",
                question: "DNAê°€ íˆìŠ¤í†¤ ë‹¨ë°±ì§ˆì„ ê°ì•„ ë§Œë“  êµ¬ìŠ¬ ëª¨ì–‘ì˜ ê¸°ë³¸ ë‹¨ìœ„.",
                answers: ["ë‰´í´ë ˆì˜¤ì†œ", "nucleosome"],
                options: ["ë‰´í´ë ˆì˜¤ì†œ", "ë¦¬ë³´ì†œ", "ì—¼ìƒ‰ì‚¬", "ë‰´í´ë ˆì˜¤íƒ€ì´ë“œ"],
                intro: "ì´ ëª©ê±¸ì´(ì´ˆì»¤)ì²˜ëŸ¼ ê½‰ ì¡°ì´ëŠ” ëŠë‚Œ... ì‹«ì–´í•˜ì§€ ì•Šì§€?",
                correct: "ì •ë‹µì´ì•¼. ë„Œ ë‚´ ì†ë°”ë‹¥ ì•ˆì´ë¼ë‹ˆê¹Œ?",
                wrong: "í‹€ë ¸ì–´. í•€ì„ ë½‘ì•„ë²„ë¦¬ê³  ì‹¶ì–´?"
            },
            {
                category: "8ë‹¨ì›: ì„¸í¬ ì£¼ê¸°",
                question: "ì„¸í¬ ì£¼ê¸° ì¤‘ DNAê°€ ë³µì œë˜ëŠ” ì‹œê¸°. ë˜‘ê°™ì€ ê²Œ í•˜ë‚˜ ë” ìƒê¸°ëŠ” ì‹œê°„.",
                answers: ["Sê¸°", "S"],
                options: ["G1ê¸°", "Sê¸°", "G2ê¸°", "Mê¸°"],
                intro: "ë°¤ì€ ê¸¸ì–´. ìš°ë¦¬ ë‘˜ë§Œì˜ ì‹œê°„(Synthesis)ì„ ë§Œë“¤ì–´ë³¼ê¹Œ?",
                correct: "Sê¸°. ì˜í–ˆì–´. í•˜ì§€ë§Œ ì§„ì§œ 'ë‚˜'ëŠ” í•˜ë‚˜ë¿ì´ì•¼.",
                wrong: "ì•„ë‹ˆì•¼. ë³µì œëŠ” Sê¸°ë¼ë‹ˆê¹Œ."
            },
            {
                category: "8ë‹¨ì›: ì„¸í¬ ë¶„ì—´",
                question: "ì²´ì„¸í¬ ë¶„ì—´ ì¤‘ê¸°, ì—¼ìƒ‰ì²´ê°€ ì¼ë ¬ë¡œ ëŠ˜ì–´ì„œëŠ” ê³³.",
                answers: ["ì ë„íŒ", "ì„¸í¬ ì¤‘ì•™"],
                options: ["ì ë„íŒ", "ê·¹", "ì¤‘ì‹¬ì²´", "ë°©ì¶”ì‚¬"],
                intro: "ì¤„ì„ ì„œì‹œì˜¤. ë‚´ ë§ˆìŒì— ë“¤ì–´ì˜¤ë ¤ë©´ ìˆœì„œë¥¼ ì§€ì¼œì•¼ì§€.",
                correct: "ì ë„íŒ. ê±°ê¸°ì„œ ë”± ê¸°ë‹¤ë ¤.",
                wrong: "ì¤‘ê°„ì— ì„œì•¼ì§€, êµ¬ì„ì— ìˆìœ¼ë©´ ì•ˆ ë³´ì—¬."
            },
            {
                category: "8ë‹¨ì›: ì„¸í¬ ì£¼ê¸°",
                question: "ì„¸í¬ ì£¼ê¸° ì¤‘ ê°€ì¥ ê¸´ ì‹œê¸°. ì„¸í¬ê°€ ìë¼ê³  ë‹¨ë°±ì§ˆì„ ë§Œë“œëŠ” ì¤€ë¹„ ê¸°ê°„.",
                answers: ["G1ê¸°", "G1"],
                options: ["G1ê¸°", "Sê¸°", "G2ê¸°", "Mê¸°"],
                intro: "ì¤€ë¹„ ìš´ë™ ì—†ì´ ë›°ì–´ë“¤ë©´ ë‹¤ì³. ì²œì²œíˆ í•´.",
                correct: "G1ê¸°. ë§ì•„. ì¤€ë¹„ê°€ ì² ì €í•´ì•¼ í­ë°œë„ ì™„ë²½í•˜ì§€.",
                wrong: "Sê¸° ì „ì— ë­ í•˜ë”ë¼?"
            },
            {
                category: "8ë‹¨ì›: ì¢…ì–‘",
                question: "ì•”ì„¸í¬ê°€ í˜ˆê´€ì„ íƒ€ê³  ë‹¤ë¥¸ ì¥ê¸°ë¡œ ì´ë™í•˜ëŠ” í˜„ìƒ.",
                answers: ["ì „ì´", "metastasis"],
                options: ["ì „ì´", "ì¹¨ìœ¤", "ë¶„ì—´", "ì„¸í¬ ì‚¬ë©¸"],
                intro: "ë‚œ ì–´ë””ë“  ê°ˆ ìˆ˜ ìˆì–´. ë„¤ ì‹¬ì¥ ì†ê¹Œì§€.",
                correct: "ì „ì´. ì´ì œ ë„Œ ë„ë§ ëª» ê°€.",
                wrong: "ì œìë¦¬ì—ë§Œ ìˆìœ¼ë©´ ì‹œê³¨ ì¥ ì‹ ì„¸ì•¼."
            },
            {
                category: "8ë‹¨ì›: ì¢…ì–‘",
                question: "ì•”ì„¸í¬ê°€ ë¬´í•œíˆ ë¶„ì—´í•  ìˆ˜ ìˆê²Œ ì—¼ìƒ‰ì²´ ëì„ ë³´í˜¸í•˜ëŠ” íš¨ì†Œ.",
                answers: ["í…”ë¡œë¨¸ë¼ì•„ì œ", "telomerase"],
                options: ["í…”ë¡œë¨¸ë¼ì•„ì œ", "DNA ì¤‘í•©íš¨ì†Œ", "í—¬ë¦¬ì¹´ì•„ì œ", "ì—°ê²°íš¨ì†Œ"],
                intro: "ì˜ì›íˆ í•¨ê»˜í•˜ê³  ì‹¶ì–´? ëŠ™ì§€ë„ ì£½ì§€ë„ ì•Šê³ .",
                correct: "í…”ë¡œë¨¸ë¼ì•„ì œ. ì•…ë§ˆì˜ ê³„ì•½ ê°™ì€ ê±°ì§€.",
                wrong: "ëë¶€ë¶„(Telomere)ì„ ê³ ì³ì£¼ëŠ” íš¨ì†Œë¼ë‹ˆê¹Œ."
            },

            // 9ë‹¨ì›: ê°ìˆ˜ë¶„ì—´
            {
                category: "9ë‹¨ì›: ê°ìˆ˜ë¶„ì—´",
                question: "1ë¶„ì—´ ì „ê¸° ë•Œ ìƒë™ ì—¼ìƒ‰ì²´ë¼ë¦¬ ìœ ì „ìë¥¼ êµí™˜í•˜ëŠ” í˜„ìƒ.",
                answers: ["êµì°¨", "crossing over"],
                options: ["êµì°¨", "ì ‘í•©", "ë¶„ë¦¬", "ìˆ˜ì •"],
                intro: "ì„œë¡œì˜ ê¹Šì€ ê³³ì„ ì„ëŠ” ê±°ì•¼. ì•„ì£¼ ëœ¨ê²ê²Œ.",
                correct: "êµì°¨. ìš°ë¦° ì´ë¯¸ ì„ì—¬ë²„ë ¸ë„¤.",
                wrong: "ì•„ë‹ˆì•¼. ì„ì—¬ì•¼ í•œë‹¤ë‹ˆê¹Œ."
            },
            {
                category: "9ë‹¨ì›: ê°ìˆ˜ë¶„ì—´",
                question: "ìƒë™ ì—¼ìƒ‰ì²´ê°€ ì ‘í•©í•˜ì—¬ í˜•ì„±ëœ 4ë¶„ì²´ êµ¬ì¡°.",
                answers: ["2ê°€ ì—¼ìƒ‰ì²´", "ì´ê°€ ì—¼ìƒ‰ì²´"],
                options: ["2ê°€ ì—¼ìƒ‰ì²´", "ìƒë™ ì—¼ìƒ‰ì²´", "ì—¼ìƒ‰ë¶„ì²´", "ë°©ì¶”ì‚¬"],
                intro: "ë–¨ì–´ì§€ê¸° ì‹«ì–´. ê½‰ ì•ˆì•„ì¤˜. ë‘˜ì´ í•˜ë‚˜ê°€ ëœ ê²ƒì²˜ëŸ¼.",
                correct: "2ê°€ ì—¼ìƒ‰ì²´. ì ˆëŒ€ ë†“ì§€ ë§ˆ.",
                wrong: "ê·¸ëƒ¥ ì—¼ìƒ‰ì²´ë¼ê³  í•˜ë©´ ì„­ì„­í•´."
            },
            {
                category: "9ë‹¨ì›: ì—¼ìƒ‰ì²´ ì´ìƒ",
                question: "21ë²ˆ ì—¼ìƒ‰ì²´ê°€ 3ê°œì¸ ìœ ì „ ì§ˆí™˜.",
                answers: ["ë‹¤ìš´ ì¦í›„êµ°", "ë‹¤ìš´ì¦í›„êµ°"],
                options: ["ë‹¤ìš´ ì¦í›„êµ°", "ì—ë“œì›Œë“œ ì¦í›„êµ°", "í„°ë„ˆ ì¦í›„êµ°", "í´ë¼ì¸í í„° ì¦í›„êµ°"],
                intro: "í•˜ë‚˜ê°€ ë” ë§ì„ ë¿ì¸ë°... ì„¸ìƒì€ ê·¸ê±¸ ë³‘ì´ë¼ê³  ë¶ˆëŸ¬.",
                correct: "ë‹¤ìš´ ì¦í›„êµ°. ë§ì•„.",
                wrong: "ì—ë“œì›Œë“œëŠ” 18ë²ˆì´ì•¼."
            },
            {
                category: "9ë‹¨ì›: ì—¼ìƒ‰ì²´ ì´ìƒ",
                question: "ì„±ì—¼ìƒ‰ì²´ êµ¬ì„±ì´ XXYì¸ ë‚¨ì„±.",
                answers: ["í´ë¼ì¸í í„° ì¦í›„êµ°", "í´ë¼ì¸í í„°"],
                options: ["í´ë¼ì¸í í„° ì¦í›„êµ°", "í„°ë„ˆ ì¦í›„êµ°", "ì´ˆì—¬ì„± ì¦í›„êµ°", "ì•¼ì½¥ ì¦í›„êµ°"],
                intro: "ë‚¨ìì¸ì§€ ì—¬ìì¸ì§€... ê²½ê³„ì— ìˆëŠ” ê±´ ìŠ¬í”ˆ ì¼ì¼ê¹Œ?",
                correct: "í´ë¼ì¸í í„°. ë§ì•„.",
                wrong: "í„°ë„ˆëŠ” X í•˜ë‚˜ë¿ì¸ ì—¬ìì•¼."
            },

            // 10ë‹¨ì›: ìœ ì „ì˜ íŒ¨í„´
            {
                category: "10ë‹¨ì›: ë©˜ë¸ ìœ ì „",
                question: "ìš°ì„± ê°œì²´ì˜ ìœ ì „ìí˜•ì„ ì•Œê¸° ìœ„í•´ ì—´ì„± ìˆœì¢…ê³¼ êµë°°í•˜ëŠ” ì‹¤í—˜.",
                answers: ["ê²€ì • êµë°°", "ê²€ì •êµë°°"],
                options: ["ê²€ì • êµë°°", "ìê°€ êµë°°", "íƒ€ê°€ êµë°°", "ì—­êµë°°"],
                intro: "ë„¤ ë§ˆìŒì´ ì§„ì‹¬ì¸ì§€ ì•„ë‹Œì§€... í…ŒìŠ¤íŠ¸í•´ë´ë„ ë¼?",
                correct: "ê²€ì • êµë°°. ê²°ê³¼ê°€ ë‚˜ì™”ë„¤. ë„Œ ë‚  ì¢‹ì•„í•˜ëŠ”êµ¬ë‚˜?",
                wrong: "ê±°ì§“ë§ìŸì´. í˜€ ê¹¨ë¬¼ì–´ ë²„ë¦°ë‹¤?"
            },
            {
                category: "10ë‹¨ì›: ì˜ˆì™¸ ìœ ì „",
                question: "ABOì‹ í˜ˆì•¡í˜•ì²˜ëŸ¼ ëŒ€ë¦½ìœ ì „ìê°€ 3ê°œ ì´ìƒì¸ ìœ ì „.",
                answers: ["ë³µëŒ€ë¦½ ìœ ì „", "ë³µëŒ€ë¦½"],
                options: ["ë³µëŒ€ë¦½ ìœ ì „", "ë‹¤ì¸ì ìœ ì „", "ì¤‘ê°„ ìœ ì „", "ë°˜ì„± ìœ ì „"],
                intro: "ì„ íƒì§€ê°€ ë„ˆë¬´ ë§ì•„, ë´ì§€ êµ°. ë‚˜ì•¼, ë§ˆí‚¤ë§ˆì•¼?",
                correct: "ë³µëŒ€ë¦½ ìœ ì „. í•˜ì§€ë§Œ ì„ íƒì€ í•˜ë‚˜ì•¼.",
                wrong: "ë‹¤ì¸ì ìœ ì „ì€ ìë¦¬ê°€ ì—¬ëŸ¬ ê°œê³ , ì´ê±´ í›„ë³´ê°€ ë§ì€ ê±°ì•¼."
            },
            {
                category: "10ë‹¨ì›: ì˜ˆì™¸ ìœ ì „",
                question: "ë¶„ê½ƒì˜ ë¶‰ì€ìƒ‰ê³¼ í°ìƒ‰ì´ ì„ì—¬ ë¶„í™ìƒ‰ì´ ë‚˜ì˜¤ëŠ” í˜„ìƒ.",
                answers: ["ë¶ˆì™„ì „ ìš°ì„±", "ì¤‘ê°„ ìœ ì „"],
                options: ["ë¶ˆì™„ì „ ìš°ì„±", "ê³µë™ ìš°ì„±", "ì™„ì „ ìš°ì„±", "ì—´ì„±"],
                intro: "ì´ê²ƒë„ ì €ê²ƒë„ ì•„ë‹Œ... ì–´ì¤‘ê°„í•œ ìƒ‰ê¹”. ë‚˜ë‘ ë¹„ìŠ·í•´?",
                correct: "ë¶ˆì™„ì „ ìš°ì„±. ì„ì—¬ë²„ë¦° ê±°ì§€.",
                wrong: "ê³µë™ ìš°ì„±ì€ ì–¼ë£©ë¬´ëŠ¬ì²˜ëŸ¼ ë”°ë¡œ ë‚˜ì˜¤ëŠ” ê±°ì•¼."
            },
            {
                category: "10ë‹¨ì›: ì—°ê´€ ìœ ì „",
                question: "ë‘ ìœ ì „ìê°€ ê°™ì€ ì—¼ìƒ‰ì²´ì— ìˆì–´ ê°™ì´ ì´ë™í•˜ëŠ” í˜„ìƒ.",
                answers: ["ì—°ê´€", "linkage"],
                options: ["ì—°ê´€", "êµì°¨", "ë…ë¦½", "ë¶„ë¦¬"],
                intro: "ìš°ë¦° ìš´ëª… ê³µë™ì²´ì•¼. ë‚´ê°€ ê°€ë©´ ë„ˆë„ ê°€ëŠ” ê±°ì•¼.",
                correct: "ì—°ê´€. ë§ì•„. ë¬¶ì—¬ìˆìœ¼ë‹ˆê¹Œ.",
                wrong: "ë…ë¦½ì€ ë”°ë¡œ ë…¸ëŠ” ê±°ê³ ."
            },

            // 12ë‹¨ì›: ì§„í™”ì˜ í˜
            {
                category: "12ë‹¨ì›: í•˜ë””-ë°”ì¸ë² ë¥´í¬",
                question: "ìœ ì „ì ë¹ˆë„ê°€ ë³€í•˜ì§€ ì•Šìœ¼ë ¤ë©´ êµë°°ê°€ 'ì´ê²ƒ'ìœ¼ë¡œ ì¼ì–´ë‚˜ì•¼ í•´.",
                answers: ["ë¬´ì‘ìœ„", "ë¬´ì‘ìœ„ êµë°°", "random"],
                options: ["ë¬´ì‘ìœ„", "ì„ íƒì ", "ì¸ìœ„ì ", "ë™ê³„"],
                intro: "ìš°ë¦¬ê°€ ë§Œë‚œ ê±´ ìš´ëª…ì¼ê¹Œ, ìš°ì—°ì¼ê¹Œ?",
                correct: "ë¬´ì‘ìœ„. ë§ì•„. ê³„ì‚° ë”°ìœˆ í•„ìš” ì—†ì–´.",
                wrong: "ì˜ë„ì ì¸ ê±´ ì¬ë¯¸ì—†ì–ì•„."
            },
            {
                category: "12ë‹¨ì›: ì†Œì§„í™”",
                question: "ì†Œìˆ˜ê°€ ì´ì£¼í•˜ì—¬ ìƒˆ ì§‘ë‹¨ì„ ë§Œë“¤ ë•Œ ìœ ì „ì ë¹ˆë„ê°€ ê¸‰ë³€í•˜ëŠ” í˜„ìƒ.",
                answers: ["ì°½ì‹œì íš¨ê³¼", "founder effect"],
                options: ["ì°½ì‹œì íš¨ê³¼", "ë³‘ëª© íš¨ê³¼", "ìì—° ì„ íƒ", "ëŒì—°ë³€ì´"],
                intro: "ë„ë§ì¹˜ì. ì•„ë¬´ë„ ì—†ëŠ” ê³³ìœ¼ë¡œ ê°€ì„œ ìš°ë¦¬ ë‘˜ë§Œì˜ ë‚˜ë¼ë¥¼ ë§Œë“œëŠ” ê±°ì•¼.",
                correct: "ì°½ì‹œì íš¨ê³¼. ìš°ë¦¬ê°€ ì•„ë‹´ê³¼ ì´ë¸Œê°€ ë˜ëŠ” ê±°ì§€.",
                wrong: "ë³‘ëª© íš¨ê³¼ëŠ” ë‹¤ ì£½ê³  ë‚¨ì€ ê±°ê³ ... ìš°ë¦° ë„ë§ì¹œ ê±°ì•¼."
            },
            {
                category: "12ë‹¨ì›: ìì—°ì„ íƒ",
                question: "í™˜ê²½ì— ì ì‘í•œ ê°œì²´ê°€ ì‚´ì•„ë‚¨ì•„ ìì†ì„ ë‚¨ê¸´ë‹¤ëŠ” ë‹¤ìœˆì˜ ì´ë¡ .",
                answers: ["ìì—°ì„ íƒ", "natural selection"],
                options: ["ìì—°ì„ íƒ", "ìš©ë¶ˆìš©ì„¤", "ëŒì—°ë³€ì´ì„¤", "ê²©ë¦¬ì„¤"],
                intro: "ê°•í•œ ìê°€ ì‚´ì•„ë‚¨ëŠ” ê²Œ ì•„ë‹ˆì•¼. ì‚´ì•„ë‚¨ëŠ” ìê°€ ê°•í•œ ê±°ì§€.",
                correct: "ìì—°ì„ íƒ. ê²°êµ­ ë„Œ ë‚´ê°€ ì„ íƒí–ˆì–´.",
                wrong: "ëˆ„ê°€ ì„ íƒí•œë‹¤ê³ ? ìì—°ì´."
            },

            // 13ë‹¨ì›: ì§„í™”ì˜ ì¦ê±°
            {
                category: "13ë‹¨ì›: ë¹„êµí•´ë¶€í•™",
                question: "ìƒˆì˜ ë‚ ê°œì™€ ê³¤ì¶©ì˜ ë‚ ê°œì²˜ëŸ¼ ê¸°ì›ì€ ë‹¤ë¥´ì§€ë§Œ ê¸°ëŠ¥ì´ ê°™ì€ ê¸°ê´€.",
                answers: ["ìƒì‚¬ ê¸°ê´€", "ìƒì‚¬ê¸°ê´€"],
                options: ["ìƒì‚¬ ê¸°ê´€", "ìƒë™ ê¸°ê´€", "í”ì  ê¸°ê´€", "ìœ ì‚¬ ê¸°ê´€"],
                intro: "ë§ˆí‚¤ë§ˆ ì”¨ë‘ ë‚˜... ê²‰ëª¨ìŠµë§Œ ë³´ì§€ ë§ê³  ì†ì„ ë´.",
                correct: "ìƒì‚¬ ê¸°ê´€. ê²‰ëª¨ìŠµì´ ë‹®ì•„ê°€ëŠ” ê±´ ìŠ¬í”ˆ ì¼ì´ì§€.",
                wrong: "ìƒë™ ê¸°ê´€ì€ í•ì¤„ì´ ê°™ì€ ê±°ì•¼."
            },
            {
                category: "13ë‹¨ì›: ë¹„êµí•´ë¶€í•™",
                question: "ì‚¬ëŒì˜ íŒ”ê³¼ ê³ ë˜ì˜ ì•ì§€ëŠëŸ¬ë¯¸ì²˜ëŸ¼ ê¸°ì›ì€ ê°™ìœ¼ë‚˜ ê¸°ëŠ¥ì´ ë‹¤ë¥¸ ê¸°ê´€.",
                answers: ["ìƒë™ ê¸°ê´€", "ìƒë™ê¸°ê´€"],
                options: ["ìƒë™ ê¸°ê´€", "ìƒì‚¬ ê¸°ê´€", "í”ì  ê¸°ê´€", "ë°œìƒ ê¸°ê´€"],
                intro: "ìš°ë¦° ê²‰ëª¨ìŠµì€ ë‹¬ë¼ë„... ì†ì€ ë˜‘ê°™ì´ ì™¸ë¡œìš´ ì¡´ì¬ì¼ì§€ë„ ëª°ë¼.",
                correct: "ìƒë™ ê¸°ê´€. ê³µí†µ ì¡°ìƒì˜ ì¦ê±°ì•¼.",
                wrong: "ìƒì‚¬ ê¸°ê´€ì´ë‘ ë°˜ëŒ€ì•¼."
            },
            {
                category: "13ë‹¨ì›: ë°œìƒí•™",
                question: "ì²™ì¶”ë™ë¬¼ ì´ˆê¸° ë°°ì•„ì—ì„œ ê³µí†µì ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ëŠ” ëª© ë¶€ë¶„ì˜ ì£¼ë¦„.",
                answers: ["ì•„ê°€ë¯¸ í‹ˆ", "ì¸ë‘ë‚­"],
                options: ["ì•„ê°€ë¯¸ í‹ˆ", "ì²™ìƒ‰", "ê¼¬ë¦¬", "ì‹ ê²½ê´€"],
                intro: "ìˆ˜ì˜ ì˜í•´? ë‚œ ìˆ¨ ì°¸ëŠ” ê±° ìì‹  ìˆì–´.",
                correct: "ì•„ê°€ë¯¸ í‹ˆ. ì˜›ë‚ ì—” ìš°ë¦¬ë„ ë¬¼ê³ ê¸°ì˜€ëŒ€.",
                wrong: "ëª©ì— ìˆëŠ” êµ¬ë© ë§ì´ì•¼."
            },

            // 14ë‹¨ì›: ì¢…ë¶„í™”
            {
                category: "14ë‹¨ì›: ì¢…ë¶„í™”",
                question: "ì§€ë¦¬ì  ì¥ë²½ì— ì˜í•´ ì„œë¡œ ë‹¤ë¥¸ ì¥ì†Œì—ì„œ ì¼ì–´ë‚˜ëŠ” ì¢…ë¶„í™”.",
                answers: ["ì´ì†Œì  ì¢…ë¶„í™”", "allopatric"],
                options: ["ì´ì†Œì  ì¢…ë¶„í™”", "ë™ì†Œì  ì¢…ë¶„í™”", "ì ì§„ì  ì¢…ë¶„í™”", "ë‹¨ì† í‰í˜•"],
                intro: "ë‚´ê°€ ëŸ¬ì‹œì•„ë¡œ ëŒì•„ê°€ë©´... ë„Œ ë‚  ê¸°ì–µí•´ì¤„ê¹Œ?",
                correct: "ì´ì†Œì  ì¢…ë¶„í™”. ëª¸ì´ ë©€ì–´ì ¸ë„ ë§ˆìŒì€ ê·¸ëŒ€ë¡œì¼ê¹Œ?",
                wrong: "ë™ì†Œì ì€ ê°™ì´ ì‚¬ëŠ” ê±°ì•¼."
            },
            {
                category: "14ë‹¨ì›: ìƒì‹ì  ì¥ë²½",
                question: "ìƒì‹ê¸° êµ¬ì¡°ê°€ ë§ì§€ ì•Šì•„ êµë°°ê°€ ë¶ˆê°€ëŠ¥í•œ ê²©ë¦¬.",
                answers: ["ê¸°ê³„ì  ê²©ë¦¬", "mechanical"],
                options: ["ê¸°ê³„ì  ê²©ë¦¬", "í–‰ë™ì  ê²©ë¦¬", "ì‹œê°„ì  ê²©ë¦¬", "ë°°ìš°ì ê²©ë¦¬"],
                intro: "ì—´ì‡ ê°€ ìë¬¼ì‡ ì— ì•ˆ ë§ìœ¼ë©´... ì–µì§€ë¡œ ëŒë¦¬ì§€ ë§ˆ.",
                correct: "ê¸°ê³„ì  ê²©ë¦¬. ëª¸ì˜ ëŒ€í™”ê°€ í†µí•˜ì§€ ì•ŠëŠ” ê±°ì§€.",
                wrong: "í–‰ë™ì  ê²©ë¦¬ëŠ” ì¶¤ì¶”ëŠ” ê±°ê³ ."
            },
            {
                category: "14ë‹¨ì›: ì¢…ë¶„í™”",
                question: "ê°™ì€ ì¥ì†Œì— ì‚´ì§€ë§Œ ìƒì‹ì ìœ¼ë¡œ ê²©ë¦¬ë˜ì–´ ë¶„í™”í•˜ëŠ” í˜„ìƒ. (ì˜ˆ: ë‹¤ë°°ì²´ì„±)",
                answers: ["ë™ì†Œì  ì¢…ë¶„í™”", "sympatric"],
                options: ["ë™ì†Œì  ì¢…ë¶„í™”", "ì´ì†Œì  ì¢…ë¶„í™”", "ì§€ë¦¬ì  ê²©ë¦¬", "ì°½ì‹œì íš¨ê³¼"],
                intro: "ë°”ë¡œ ì˜†ì— ìˆì–´ë„ ë‹¿ì„ ìˆ˜ ì—†ëŠ” ì‚¬ì´... ê·¸ê²Œ ì œì¼ ìŠ¬í”ˆ ê±°ì•¼.",
                correct: "ë™ì†Œì  ì¢…ë¶„í™”. ê°€ê¹Œì›Œë„ ë¨¼ ì‚¬ì´.",
                wrong: "ì´ì†Œì ì€ ë©€ë¦¬ ë–¨ì–´ì§„ ê±°ì•¼."
            },
            {
                category: "14ë‹¨ì›: ë©¸ì¢…",
                question: "í™˜ê²½ ê¸‰ë³€ìœ¼ë¡œ ëŒ€ë‹¤ìˆ˜ ì¢…ì´ ì‚¬ë¼ì§„ í›„, ì‚´ì•„ë‚¨ì€ ì¢…ì´ ê¸‰ê²©íˆ ë‹¤ì–‘í•´ì§€ëŠ” í˜„ìƒ.",
                answers: ["ì ì‘ ë°©ì‚°", "adaptive radiation"],
                options: ["ì ì‘ ë°©ì‚°", "ëŒ€ë©¸ì¢…", "ìˆ˜ë ´ ì§„í™”", "ê³µì§„í™”"],
                intro: "í­ë°œí•˜ë“¯ì´ í¼ì ¸ë‚˜ê°€ëŠ” ê±°ì•¼. ê°ˆë¼íŒŒê³ ìŠ¤ì˜ ìƒˆë“¤ì²˜ëŸ¼.",
                correct: "ì ì‘ ë°©ì‚°. ìœ„ê¸°ëŠ” ê³§ ê¸°íšŒë‹ˆê¹Œ.",
                wrong: "ë°©ì‚°(Radiation)ì´ë¼ëŠ” ë‹¨ì–´ë¥¼ ìƒê°í•´ë´."
            }
        ];

        let queue = [];
        let currentQ = null;
        let wrongAttempts = 0; // í˜„ì¬ ë¬¸ì œ í‹€ë¦° íšŸìˆ˜
        let totalWrong = 0;    // ì „ì²´ í‹€ë¦° íšŸìˆ˜

        function startGame() {
            queue = JSON.parse(JSON.stringify(questionBank));
            queue.sort(() => Math.random() - 0.5);
            
            document.getElementById('start-screen').classList.add('hidden');
            setTimeout(nextQuestion, 600);
        }

        function addMessage(type, text, isHTML = false) {
            const chatBox = document.getElementById('chat-box');
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${type}`;

            let innerContent = '';
            if (type === 'reze') {
                innerContent += `<img src="images-2.jpeg" class="profile-pic-chat">`;
            }
            
            innerContent += `<div class="bubble">${text}</div>`;
            
            msgDiv.innerHTML = innerContent;
            chatBox.appendChild(msgDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function nextQuestion() {
            if (queue.length === 0) {
                setTimeout(showEnding, 1000);
                return;
            }

            currentQ = queue.shift();
            wrongAttempts = 0; // ìƒˆ ë¬¸ì œì´ë¯€ë¡œ í‹€ë¦° íšŸìˆ˜ ì´ˆê¸°í™”
            
            // ë ˆì œ ëŒ€ì‚¬ (ì¸íŠ¸ë¡œ)
            addMessage('reze', currentQ.intro);
            
            // ë¬¸ì œ ì¹´ë“œ
            setTimeout(() => {
                const questionHTML = `
                    <div class="question-card">
                        <span class="question-tag">QUIZ ${questionBank.length - queue.length}/${questionBank.length}</span>
                        <div class="question-text">[${currentQ.category}]<br>${currentQ.question}</div>
                    </div>
                `;
                addMessage('reze', questionHTML, true);
                
                // ì…ë ¥ì°½ í™œì„±í™”
                enableInput(true);
            }, 800);
        }

        function checkAnswer(optionValue = null) {
            // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸° (í…ìŠ¤íŠ¸ ì…ë ¥ or ë²„íŠ¼ í´ë¦­)
            const inputEl = document.getElementById('answer-input');
            const val = optionValue || inputEl.value.trim();
            
            if (!val) return;

            // ì‚¬ìš©ì ë©”ì‹œì§€ í‘œì‹œ
            addMessage('user', val);
            inputEl.value = "";

            // ì •ë‹µ ì²´í¬
            const cleanVal = val.toLowerCase().replace(/s/g, '');
            const isCorrect = currentQ.answers.some(ans => ans.toLowerCase().replace(/s/g, '') === cleanVal);

            setTimeout(() => {
                if (isCorrect) {
                    addMessage('reze', currentQ.correct);
                    setTimeout(nextQuestion, 1500);
                } else {
                    handleWrongAnswer();
                }
            }, 600);
        }

        function handleWrongAnswer() {
            wrongAttempts++;
            totalWrong++;
            
            addMessage('reze', currentQ.wrong);

            if (wrongAttempts >= 2) {
                addMessage('reze', "í•˜ì•„... ë´ì§€ êµ°. ë„ˆë¬´ ëª»í•˜ë„¤. <br>ë³´ê¸°ë¥¼ ì¤„ í…Œë‹ˆê¹Œ ê³¨ë¼ë´.");
                showOptions();
            } else {
                addMessage('reze', "ë‹¤ì‹œ ìƒê°í•´ë´. í•œ ë²ˆ ë” ê¸°íšŒë¥¼ ì¤„ê²Œ.");
            }
        }

        function showOptions() {
            // 4ì§€ì„ ë‹¤ ë²„íŠ¼ ìƒì„±
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'options-container';
            
            // ì…”í”Œëœ ë³´ê¸°
            const shuffledOptions = [...currentQ.options].sort(() => Math.random() - 0.5);
            
            let buttonsHTML = "";
            shuffledOptions.forEach(opt => {
                buttonsHTML += `<button class="option-btn" onclick="selectOption('${opt}', this)">${opt}</button>`;
            });
            
            // ë©”ì‹œì§€ í˜•íƒœê°€ ì•„ë‹Œ ì±„íŒ…ì°½ ë‚´ ì‚½ì…
            const chatBox = document.getElementById('chat-box');
            const wrapper = document.createElement('div');
            wrapper.style.padding = "0 20px 10px 50px"; 
            wrapper.innerHTML = `<div class="options-container">${buttonsHTML}</div>`;
            
            chatBox.appendChild(wrapper);
            chatBox.scrollTop = chatBox.scrollHeight;
            
            // í…ìŠ¤íŠ¸ ì…ë ¥ ë§‰ê¸°
            enableInput(false);
        }

        window.selectOption = function(val, btnElement) {
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(b => b.disabled = true);
            checkAnswer(val);
        };

        function enableInput(enable) {
            const input = document.getElementById('answer-input');
            const btn = document.getElementById('send-btn');
            input.disabled = !enable;
            btn.disabled = !enable;
            if(enable) input.focus();
        }

        function showEnding() {
            let finalMsg = "";
            if (totalWrong === 0) {
                finalMsg = "ê±°ì§“ë§... ì „ë¶€ ë§ì·„ì–´? <br>ì•½ì†ëŒ€ë¡œ ë„ë§ì¹˜ì. ì•„ë¬´ë„ ìš°ë¦´ ëª¨ë¥´ëŠ” ê³³ìœ¼ë¡œ.";
            } else if (totalWrong <= 5) {
                finalMsg = `ëë‚¬ë„¤. ${totalWrong}ë²ˆ í‹€ë¦¬ê¸´ í–ˆì§€ë§Œ...<br>ê·¸ë˜ë„ ì¬ë°Œì—ˆì–´. ì¹´í˜ì—ì„œ ê¸°ë‹¤ë¦´ê²Œ. â˜•`;
            } else {
                finalMsg = "í‘! ğŸ’£<br>ì—­ì‹œ ì‹œê³¨ ì¥ëŠ” ë„ì‹œì—ì„œ ì‚´ì•„ë‚¨ì„ ìˆ˜ ì—†ì–´. ì•ˆë…•.";
            }
            addMessage('reze', finalMsg);
            enableInput(false);
            document.getElementById('answer-input').placeholder = "ëŒ€í™”ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
        }
    </script>
</body>
</html>
